# 王者荣耀智能助手 - 数据库说明书

## 文档信息

| 项目 | 内容 |
|------|------|
| 项目名称 | 王者荣耀智能助手 |
| 文档版本 | v1.0.0 |
| 编写日期 | 2026-02-14 |
| 数据库类型 | SQLite（开发环境）/ MySQL（生产环境） |
| 文档状态 | 正式版 |

---

## 1. 数据库概述

### 1.1 数据库设计原则

- 规范化设计，减少数据冗余
- 合理的索引设计，优化查询性能
- 灵活的JSON字段，适应业务变化
- 完整的关系约束，保证数据一致性

### 1.2 表结构概览

| 表名 | 用途 | 关键字段 |
|------|------|---------|
| users | 用户信息 | id, nickname, rank, stars |
| heroes | 英雄数据 | id, name, position, difficulty |
| hero_equipments | 英雄装备推荐 | id, hero_id, equipment_list |
| hero_inscriptions | 英雄铭文推荐 | id, hero_id, inscription_config |
| equipments | 装备数据 | id, name, type, price |
| matches | 对局数据 | id, user_id, hero_id, result, kda |
| analyses | 分析报告 | id, match_id, overall_rating, report |
| conversations | 对话历史 | id, user_id, messages |

---

## 2. 表结构详细说明

### 2.1 users（用户表）

#### 2.1.1 表信息

| 项目 | 内容 |
|------|------|
| 表名 | users |
| 中文名 | 用户表 |
| 用途 | 存储用户的基本信息和游戏数据 |

#### 2.1.2 字段定义

| 字段名 | 类型 | 长度 | 允许NULL | 默认值 | 说明 |
|--------|------|------|---------|--------|------|
| id | VARCHAR | 50 | NO | - | 用户ID，主键 |
| nickname | VARCHAR | 50 | YES | - | 用户昵称 |
| avatar | VARCHAR | 200 | YES | - | 用户头像URL |
| rank | VARCHAR | 50 | YES | - | 游戏段位 |
| stars | INTEGER | - | NO | 0 | 星数 |
| favorite_heroes | JSON | - | YES | - | 常用英雄列表 |
| preferences | JSON | - | YES | - | 用户偏好设置 |
| created_at | DATETIME | - | NO | CURRENT_TIMESTAMP | 创建时间 |
| updated_at | DATETIME | - | NO | CURRENT_TIMESTAMP | 更新时间 |

#### 2.1.3 索引

| 索引名 | 字段 | 类型 | 说明 |
|--------|------|------|------|
| PRIMARY | id | 主键 | 用户ID |
| idx_id | id | 唯一索引 | 用户ID |

#### 2.1.4 关系

| 关系类型 | 关联表 | 说明 |
|---------|--------|------|
| 一对多 | conversations | 一个用户有多条对话记录 |
| 一对多 | matches | 一个用户有多场对局记录 |

#### 2.1.5 示例数据

```json
{
  "id": "user_001",
  "nickname": "王者荣耀玩家",
  "avatar": "https://example.com/avatar.jpg",
  "rank": "钻石",
  "stars": 3,
  "favorite_heroes": [1, 2, 3],
  "preferences": {
    "theme": "light",
    "notifications": true
  }
}
```

---

### 2.2 heroes（英雄表）

#### 2.2.1 表信息

| 项目 | 内容 |
|------|------|
| 表名 | heroes |
| 中文名 | 英雄表 |
| 用途 | 存储王者荣耀英雄的基础信息和技能数据 |

#### 2.2.2 字段定义

| 字段名 | 类型 | 长度 | 允许NULL | 默认值 | 说明 |
|--------|------|------|---------|--------|------|
| id | INTEGER | - | NO | - | 英雄ID，主键 |
| name | VARCHAR | 50 | NO | - | 英雄名称 |
| title | VARCHAR | 100 | YES | - | 英雄称号 |
| position | VARCHAR | 20 | YES | - | 定位（对抗路/中路/发育路/打野/游走） |
| difficulty | VARCHAR | 20 | YES | - | 难度（简单/普通/困难） |
| description | TEXT | - | YES | - | 英雄描述 |
| image_url | VARCHAR | 500 | YES | - | 英雄头像URL |
| skills | JSON | - | YES | - | 主动技能列表 |
| passive_skill | JSON | - | YES | - | 被动技能 |
| win_rate | FLOAT | - | NO | 0.0 | 胜率 |
| ban_rate | FLOAT | - | NO | 0.0 | 禁用率 |
| pick_rate | FLOAT | - | NO | 0.0 | 选用率 |
| counter_heroes | JSON | - | YES | - | 克制的英雄列表 |
| countered_by_heroes | JSON | - | YES | - | 被克制的英雄列表 |
| version | VARCHAR | 20 | YES | - | 游戏版本 |
| created_at | DATETIME | - | NO | CURRENT_TIMESTAMP | 创建时间 |
| updated_at | DATETIME | - | NO | CURRENT_TIMESTAMP | 更新时间 |

#### 2.2.3 索引

| 索引名 | 字段 | 类型 | 说明 |
|--------|------|------|------|
| PRIMARY | id | 主键 | 英雄ID |
| idx_name | name | 唯一索引 | 英雄名称 |

#### 2.2.4 关系

| 关系类型 | 关联表 | 说明 |
|---------|--------|------|
| 一对多 | hero_equipments | 一个英雄有多套装备推荐 |
| 一对多 | hero_inscriptions | 一个英雄有多套铭文推荐 |
| 一对多 | matches | 一个英雄参与多场对局 |

#### 2.2.5 示例数据

```json
{
  "id": 1,
  "name": "鲁班七号",
  "title": "机关造物",
  "position": "archer",
  "difficulty": "simple",
  "description": "鲁班七号是王者荣耀中的射手英雄...",
  "image_url": "https://example.com/hero_1.jpg",
  "skills": [
    {
      "name": "河豚手雷",
      "description": "鲁班七号投掷河豚手雷...",
      "cooldown": 8,
      "cost": 60
    }
  ],
  "passive_skill": {
    "name": "火力压制",
    "description": "鲁班七号连续使用普通攻击时..."
  },
  "win_rate": 0.52,
  "ban_rate": 0.05,
  "pick_rate": 0.35,
  "counter_heroes": [2, 3],
  "countered_by_heroes": [4, 5],
  "version": "v1.0"
}
```

---

### 2.3 hero_equipments（英雄装备推荐表）

#### 2.3.1 表信息

| 项目 | 内容 |
|------|------|
| 表名 | hero_equipments |
| 中文名 | 英雄装备推荐表 |
| 用途 | 存储英雄的装备推荐方案 |

#### 2.3.2 字段定义

| 字段名 | 类型 | 长度 | 允许NULL | 默认值 | 说明 |
|--------|------|------|---------|--------|------|
| id | INTEGER | - | NO | - | ID，主键 |
| hero_id | INTEGER | - | NO | - | 英雄ID，外键关联heroes.id |
| rank | VARCHAR | 20 | YES | - | 适用段位 |
| position | VARCHAR | 20 | YES | - | 适用位置 |
| equipment_list | JSON | - | YES | - | 装备列表 |
| win_rate | FLOAT | - | YES | - | 该方案的胜率 |
| pick_rate | FLOAT | - | YES | - | 该方案的选用率 |
| version | VARCHAR | 20 | YES | - | 版本号 |
| created_at | DATETIME | - | NO | CURRENT_TIMESTAMP | 创建时间 |

#### 2.3.3 索引

| 索引名 | 字段 | 类型 | 说明 |
|--------|------|------|------|
| PRIMARY | id | 主键 | 主键ID |
| idx_hero_id | hero_id | 普通索引 | 英雄ID |

#### 2.3.4 关系

| 关系类型 | 关联表 | 说明 |
|---------|--------|------|
| 多对一 | heroes | 属于某个英雄 |

#### 2.3.5 示例数据

```json
{
  "id": 1,
  "hero_id": 1,
  "rank": "钻石",
  "position": "archer",
  "equipment_list": [
    "急速战靴",
    "无尽战刃",
    "影刃",
    "破晓",
    "泣血之刃",
    "复活甲"
  ],
  "win_rate": 0.55,
  "pick_rate": 0.6,
  "version": "v1.0"
}
```

---

### 2.4 hero_inscriptions（英雄铭文推荐表）

#### 2.4.1 表信息

| 项目 | 内容 |
|------|------|
| 表名 | hero_inscriptions |
| 中文名 | 英雄铭文推荐表 |
| 用途 | 存储英雄的铭文推荐方案 |

#### 2.4.2 字段定义

| 字段名 | 类型 | 长度 | 允许NULL | 默认值 | 说明 |
|--------|------|------|---------|--------|------|
| id | INTEGER | - | NO | - | ID，主键 |
| hero_id | INTEGER | - | NO | - | 英雄ID，外键关联heroes.id |
| rank | VARCHAR | 20 | YES | - | 适用段位 |
| inscription_name | VARCHAR | 50 | YES | - | 铭文方案名称 |
| inscription_config | JSON | - | YES | - | 铭文配置 |
| description | TEXT | - | YES | - | 描述说明 |
| win_rate | FLOAT | - | YES | - | 该方案的胜率 |
| version | VARCHAR | 20 | YES | - | 版本号 |
| created_at | DATETIME | - | NO | CURRENT_TIMESTAMP | 创建时间 |

#### 2.4.3 索引

| 索引名 | 字段 | 类型 | 说明 |
|--------|------|------|------|
| PRIMARY | id | 主键 | 主键ID |
| idx_hero_id | hero_id | 普通索引 | 英雄ID |

#### 2.4.4 关系

| 关系类型 | 关联表 | 说明 |
|---------|--------|------|
| 多对一 | heroes | 属于某个英雄 |

#### 2.4.5 示例数据

```json
{
  "id": 1,
  "hero_id": 1,
  "rank": "钻石",
  "inscription_name": "高攻速铭文",
  "inscription_config": [
    {"name": "祸源", "count": 10},
    {"name": "无双", "count": 10},
    {"name": "鹰眼", "count": 10}
  ],
  "description": "提供高额攻击力和暴击率",
  "win_rate": 0.53,
  "version": "v1.0"
}
```

---

### 2.5 equipments（装备表）

#### 2.5.1 表信息

| 项目 | 内容 |
|------|------|
| 表名 | equipments |
| 中文名 | 装备表 |
| 用途 | 存储王者荣耀所有装备的数据 |

#### 2.5.2 字段定义

| 字段名 | 类型 | 长度 | 允许NULL | 默认值 | 说明 |
|--------|------|------|---------|--------|------|
| id | INTEGER | - | NO | - | 装备ID，主键 |
| name | VARCHAR | 50 | NO | - | 装备名称 |
| type | VARCHAR | 20 | YES | - | 装备类型（攻击/防御/移动/法术） |
| price | INTEGER | - | YES | - | 装备价格 |
| stats | JSON | - | YES | - | 装备属性加成 |
| passive | TEXT | - | YES | - | 被动技能描述 |
| active | TEXT | - | YES | - | 主动技能描述 |
| build_from | JSON | - | YES | - | 合成所需小件 |
| build_into | JSON | - | YES | - | 可合成的大件 |
| version | VARCHAR | 20 | YES | - | 版本号 |
| created_at | DATETIME | - | NO | CURRENT_TIMESTAMP | 创建时间 |
| updated_at | DATETIME | - | NO | CURRENT_TIMESTAMP | 更新时间 |

#### 2.5.3 索引

| 索引名 | 字段 | 类型 | 说明 |
|--------|------|------|------|
| PRIMARY | id | 主键 | 装备ID |
| idx_name | name | 唯一索引 | 装备名称 |

#### 2.5.4 示例数据

```json
{
  "id": 1,
  "name": "无尽战刃",
  "type": "attack",
  "price": 2140,
  "stats": {
    "attack": 130,
    "crit_rate": 0.2
  },
  "passive": "普通攻击造成暴击时，暴击效果提升40%",
  "active": "",
  "build_from": ["风暴大剑", "红宝石"],
  "build_into": [],
  "version": "v1.0"
}
```

---

### 2.6 matches（对局表）

#### 2.6.1 表信息

| 项目 | 内容 |
|------|------|
| 表名 | matches |
| 中文名 | 对局表 |
| 用途 | 存储用户的对局记录和战绩数据 |

#### 2.6.2 字段定义

| 字段名 | 类型 | 长度 | 允许NULL | 默认值 | 说明 |
|--------|------|------|---------|--------|------|
| id | VARCHAR | 50 | NO | - | 对局ID，主键 |
| user_id | VARCHAR | 50 | NO | - | 用户ID，外键关联users.id |
| hero_id | INTEGER | - | YES | - | 英雄ID，外键关联heroes.id |
| hero_name | VARCHAR | 50 | YES | - | 英雄名称 |
| position | VARCHAR | 20 | YES | - | 位置 |
| result | VARCHAR | 10 | YES | - | 对局结果（胜利/失败） |
| duration | INTEGER | - | YES | - | 对局时长（秒） |
| kills | INTEGER | - | NO | 0 | 击杀数 |
| deaths | INTEGER | - | NO | 0 | 死亡数 |
| assists | INTEGER | - | NO | 0 | 助攻数 |
| gold | INTEGER | - | NO | 0 | 金币 |
| damage | INTEGER | - | NO | 0 | 输出伤害 |
| damage_taken | INTEGER | - | NO | 0 | 承受伤害 |
| healing | INTEGER | - | NO | 0 | 治疗量 |
| participation_rate | FLOAT | - | NO | 0.0 | 参团率 |
| kda | FLOAT | - | NO | 0.0 | KDA值 |
| equipment_list | JSON | - | YES | - | 装备列表 |
| inscription | JSON | - | YES | - | 铭文配置 |
| rank | VARCHAR | 50 | YES | - | 对局时的段位 |
| screenshot_url | VARCHAR | 200 | YES | - | 截图URL |
| created_at | DATETIME | - | NO | CURRENT_TIMESTAMP | 创建时间 |

#### 2.6.3 索引

| 索引名 | 字段 | 类型 | 说明 |
|--------|------|------|------|
| PRIMARY | id | 主键 | 对局ID |
| idx_user_id | user_id | 普通索引 | 用户ID |

#### 2.6.4 关系

| 关系类型 | 关联表 | 说明 |
|---------|--------|------|
| 多对一 | users | 属于某个用户 |
| 多对一 | heroes | 使用的英雄 |
| 一对多 | analyses | 一个对局有一个分析报告 |

#### 2.6.5 示例数据

```json
{
  "id": "match_001",
  "user_id": "user_001",
  "hero_id": 1,
  "hero_name": "鲁班七号",
  "position": "archer",
  "result": "胜利",
  "duration": 1200,
  "kills": 12,
  "deaths": 3,
  "assists": 8,
  "gold": 18500,
  "damage": 185000,
  "damage_taken": 45000,
  "healing": 0,
  "participation_rate": 0.008,
  "kda": 6.7,
  "equipment_list": [
    "急速战靴",
    "无尽战刃",
    "影刃",
    "破晓",
    "泣血之刃",
    "复活甲"
  ],
  "inscription": {
    "name": "高攻速铭文",
    "config": [
      {"name": "祸源", "count": 10},
      {"name": "无双", "count": 10},
      {"name": "鹰眼", "count": 10}
    ]
  },
  "rank": "钻石",
  "screenshot_url": "https://example.com/match_001.jpg"
}
```

---

### 2.7 analyses（分析报告表）

#### 2.7.1 表信息

| 项目 | 内容 |
|------|------|
| 表名 | analyses |
| 中文名 | 分析报告表 |
| 用途 | 存储对局的分析报告和AI生成的建议 |

#### 2.7.2 字段定义

| 字段名 | 类型 | 长度 | 允许NULL | 默认值 | 说明 |
|--------|------|------|---------|--------|------|
| id | VARCHAR | 50 | NO | - | 分析ID，主键 |
| match_id | VARCHAR | 50 | NO | - | 对局ID，外键关联matches.id |
| overall_rating | VARCHAR | 20 | YES | - | 综合评价 |
| highlights | JSON | - | YES | - | 亮点表现列表 |
| mistakes | JSON | - | YES | - | 失误点列表 |
| suggestions | JSON | - | YES | - | 建议列表 |
| report | TEXT | - | YES | - | 详细分析报告 |
| improvements | JSON | - | YES | - | 改进建议列表 |
| created_at | DATETIME | - | NO | CURRENT_TIMESTAMP | 创建时间 |

#### 2.7.3 索引

| 索引名 | 字段 | 类型 | 说明 |
|--------|------|------|------|
| PRIMARY | id | 主键 | 分析ID |
| idx_match_id | match_id | 普通索引 | 对局ID |

#### 2.7.4 关系

| 关系类型 | 关联表 | 说明 |
|---------|--------|------|
| 多对一 | matches | 属于某个对局 |

#### 2.7.5 示例数据

```json
{
  "id": "analysis_001",
  "match_id": "match_001",
  "overall_rating": "优秀",
  "highlights": [
    {"text": "KDA表现优秀(6.7)，发育和击杀平衡"},
    {"text": "输出伤害高(185000)，发育良好"}
  ],
  "mistakes": [
    {"text": "参团率低(0.8%)，团队贡献不足"}
  ],
  "suggestions": [
    {"text": "提高团战参与度，及时支援队友"}
  ],
  "report": "对局复盘报告\n英雄：鲁班七号 | 位置：archer\nKDA：6.7 | 参团率：0.8%\n击杀/死亡/助攻：12/3/8\n\n亮点表现：\n• KDA表现优秀(6.7)，发育和击杀平衡\n• 输出伤害高(185000)，发育良好\n\n需要改进：\n• 参团率低(0.8%)，团队贡献不足\n\n改进建议：\n• 提高团战参与度，及时支援队友",
  "improvements": [
    {"text": "提高团战参与度，及时支援队友"},
    {"text": "复盘时重点关注失误点，避免重复犯错"}
  ]
}
```

---

### 2.8 conversations（对话历史表）

#### 2.8.1 表信息

| 项目 | 内容 |
|------|------|
| 表名 | conversations |
| 中文名 | 对话历史表 |
| 用途 | 存储用户与AI的对话历史记录 |

#### 2.8.2 字段定义

| 字段名 | 类型 | 长度 | 允许NULL | 默认值 | 说明 |
|--------|------|------|---------|--------|------|
| id | VARCHAR | 50 | NO | - | 对话ID，主键 |
| user_id | VARCHAR | 50 | NO | - | 用户ID，外键关联users.id |
| messages | JSON | - | YES | - | 消息列表 |
| created_at | DATETIME | - | NO | CURRENT_TIMESTAMP | 创建时间 |
| updated_at | DATETIME | - | NO | CURRENT_TIMESTAMP | 更新时间 |

#### 2.8.3 索引

| 索引名 | 字段 | 类型 | 说明 |
|--------|------|------|------|
| PRIMARY | id | 主键 | 对话ID |
| idx_user_id | user_id | 普通索引 | 用户ID |

#### 2.8.4 关系

| 关系类型 | 关联表 | 说明 |
|---------|--------|------|
| 多对一 | users | 属于某个用户 |

#### 2.8.5 示例数据

```json
{
  "id": "conv_001",
  "user_id": "user_001",
  "messages": [
    {
      "role": "user",
      "content": "鲁班七号怎么玩？",
      "timestamp": "2026-02-14T10:00:00"
    },
    {
      "role": "assistant",
      "content": "鲁班七号是王者荣耀中的射手英雄，主要特点是...",
      "timestamp": "2026-02-14T10:00:03"
    }
  ],
  "created_at": "2026-02-14T10:00:00",
  "updated_at": "2026-02-14T10:00:03"
}
```

---

## 3. ER图

```
users (用户)
  ├─ 1:N ─> conversations (对话历史)
  └─ 1:N ─> matches (对局)
              └─ 1:1 ─> analyses (分析报告)

heroes (英雄)
  ├─ 1:N ─> hero_equipments (装备推荐)
  ├─ 1:N ─> hero_inscriptions (铭文推荐)
  └─ 1:N ─> matches (对局)

equipments (装备)
```

---

## 4. 数据字典

### 4.1 通用字段说明

| 字段名 | 说明 | 示例值 |
|--------|------|--------|
| id | 主键ID | "user_001", 1 |
| created_at | 创建时间 | "2026-02-14T10:00:00" |
| updated_at | 更新时间 | "2026-02-14T10:00:00" |

### 4.2 枚举值说明

#### position（位置）

| 值 | 说明 |
|----|------|
| top | 对抗路 |
| mid | 中路 |
| archer | 发育路 |
| jungle | 打野 |
| support | 游走 |

#### difficulty（难度）

| 值 | 说明 |
|----|------|
| simple | 简单 |
| normal | 普通 |
| hard | 困难 |

#### result（对局结果）

| 值 | 说明 |
|----|------|
| 胜利 | 胜利 |
| 失败 | 失败 |

#### rank（段位）

| 值 | 说明 |
|----|------|
| 青铜 | 青铜段位 |
| 白银 | 白银段位 |
| 黄金 | 黄金段位 |
| 铂金 | 铂金段位 |
| 钻石 | 钻石段位 |
| 星耀 | 星耀段位 |
| 王者 | 王者段位 |

#### overall_rating（综合评价）

| 值 | 说明 |
|----|------|
| 完美 | 表现完美 |
| 优秀 | 表现优秀 |
| 良好 | 表现良好 |
| 需要改进 | 需要改进 |
| 待提升 | 待提升 |

---

## 5. 数据维护

### 5.1 数据更新策略

- 英雄数据：每周更新一次，跟随游戏版本
- 装备数据：游戏版本更新时同步更新
- 对局数据：用户手动导入后即时更新
- 分析报告：对局导入后自动生成

### 5.2 数据备份

- 每日自动备份数据库
- 保留最近30天的备份文件
- 重要变更前手动备份

### 5.3 数据清理

- 对话历史：保留最近100条
- 临时数据：定期清理过期数据
- 用户请求删除：提供数据清除功能

---

## 6. 性能优化

### 6.1 索引优化

- 所有外键字段建立索引
- 常用查询字段建立索引
- 联合索引优化复杂查询

### 6.2 查询优化

- 使用分页查询减少数据量
- 避免SELECT *，只查询需要的字段
- 使用JOIN替代多次查询
- 使用缓存减少数据库访问

### 6.3 JSON字段优化

- JSON字段只存储必要数据
- 避免JSON字段过大
- 考虑将频繁查询的JSON字段转为普通字段

---

## 7. 安全性

### 7.1 数据加密

- 敏感字段加密存储
- 使用HTTPS传输数据
- 密码使用bcrypt加密

### 7.2 访问控制

- API接口鉴权验证
- 用户数据隔离
- 操作日志记录

### 7.3 SQL注入防护

- 使用参数化查询
- 输入数据验证
- ORM框架防护

---

## 8. 迁移说明

### 8.1 SQLite转MySQL

如需将SQLite迁移到MySQL，需要注意以下事项：

1. **语法差异**：
   - SQLite的DATETIME类型对应MySQL的DATETIME
   - SQLite的JSON类型对应MySQL的JSON（MySQL 5.7+）
   - SQLite的AUTOINCREMENT对应MySQL的AUTO_INCREMENT

2. **数据迁移步骤**：
   ```bash
   # 导出SQLite数据
   sqlite3 honor_of_kings.db .dump > backup.sql
   
   # 转换SQL语法后导入MySQL
   mysql -u root -p honor_of_kings < backup.sql
   ```

3. **配置修改**：
   - 修改`app/core/database.py`中的数据库连接字符串
   - 重新安装依赖：`pip install pymysql`

### 8.2 数据库版本管理

- 使用Alembic进行数据库迁移
- 每次变更生成迁移脚本
- 记录迁移历史

---

## 9. 附录

### 9.1 初始化SQL

```sql
-- 创建用户表
CREATE TABLE users (
    id VARCHAR(50) PRIMARY KEY,
    nickname VARCHAR(50),
    avatar VARCHAR(200),
    rank VARCHAR(50),
    stars INTEGER DEFAULT 0,
    favorite_heroes JSON,
    preferences JSON,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- 创建英雄表
CREATE TABLE heroes (
    id INTEGER PRIMARY KEY,
    name VARCHAR(50) UNIQUE NOT NULL,
    title VARCHAR(100),
    position VARCHAR(20),
    difficulty VARCHAR(20),
    description TEXT,
    image_url VARCHAR(500),
    skills JSON,
    passive_skill JSON,
    win_rate FLOAT DEFAULT 0.0,
    ban_rate FLOAT DEFAULT 0.0,
    pick_rate FLOAT DEFAULT 0.0,
    counter_heroes JSON,
    countered_by_heroes JSON,
    version VARCHAR(20),
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- 创建其他表...
```

### 9.2 常用查询示例

```sql
-- 查询用户最近的10场对局
SELECT * FROM matches 
WHERE user_id = 'user_001' 
ORDER BY created_at DESC 
LIMIT 10;

-- 查询某个英雄的胜率
SELECT AVG(CASE WHEN result = '胜利' THEN 1 ELSE 0 END) * 100 as win_rate
FROM matches 
WHERE hero_id = 1;

-- 查询用户常用英雄
SELECT hero_id, hero_name, COUNT(*) as play_count
FROM matches 
WHERE user_id = 'user_001'
GROUP BY hero_id, hero_name
ORDER BY play_count DESC
LIMIT 5;
```

---

**文档结束**
